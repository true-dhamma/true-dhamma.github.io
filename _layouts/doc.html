---
layout: default
---

<!-- 1. 引入 AlbeMic 主题的页眉 -->
{% include site-header.html %}

<!-- CSS 样式 (保持不变) -->
<style>
  /* ... 这里是你之前的全部 CSS 代码，无需改动 ... */
  /* 为了简洁，我在这里省略，请保留你文件里已有的 <style> 部分 */
  .doc-layout { display: grid; /* ... etc */ }
</style>

<!-- 
  3. HTML 结构 
-->
<main class="main  container">

  <div class="doc-layout">
    
    <!-- ======================================================= -->
    <!-- 左侧边栏 - 添加了安全检查 -->
    <!-- ======================================================= -->
    <aside class="doc-sidebar-left">
      <nav class="doc-chapters-nav">
        <h3>{{ site.title | default: "My Book" }}</h3>
        
        <!-- 安全检查：仅当 site.docs 存在时才进行排序和循环 -->
        {% if site.docs and site.docs.size > 0 %}
          <ul>
            {% assign sorted_docs = site.docs | sort: 'order' %}
            {% for doc in sorted_docs %}
              <li {% if page.url == doc.url %}class="active"{% endif %}>
                <a href="{{ doc.url | relative_url }}">{{ doc.title }}</a>
              </li>
            {% endfor %}
          </ul>
        {% endif %}
        
      </nav>
    </aside>

    <!-- ======================================================= -->
    <!-- 中间主内容区 - 翻页逻辑已修正 -->
    <!-- ======================================================= -->
    <div class="doc-main-content">
      <article class="article  article--page  typeset">
        <h1>{{ page.title }}</h1>
        {{ content }}

        <!-- 翻页导航 - 添加了安全检查并修正了语法 -->
        <nav class="doc-pagination">
          {% if site.docs and site.docs.size > 0 %}
            {% assign sorted_docs = site.docs | sort: 'order' %}
            {% assign current_index = -1 %}
            
            {% for doc in sorted_docs %}
              {% if doc.url == page.url %}
                {% assign current_index = forloop.index0 %}
              {% endif %}
            {% endfor %}
            
            {% if current_index != -1 %}
              <!-- 上一页 -->
              {% if current_index > 0 %}
                {% assign prev_doc_index = current_index | minus: 1 %}
                {% assign prev_doc = sorted_docs[prev_doc_index] %}
                <a href="{{ prev_doc.url | relative_url }}" class="prev">&laquo; {{ prev_doc.title }}</a>
              {% else %}
                <span></span> <!-- 占位符 -->
              {% endif %}
              
              <!-- 下一页 -->
              {% assign next_doc_index = current_index | plus: 1 %}
              {% if next_doc_index < sorted_docs.size %}
                {% assign next_doc = sorted_docs[next_doc_index] %}
                <a href="{{ next_doc.url | relative_url }}" class="next">{{ next_doc.title }} &raquo;</a>
              {% endif %}
            {% endif %}
          {% endif %}
        </nav>
      </article>
    </div>

    <!-- 右侧边栏 (保持不变) -->
    <aside class="doc-sidebar-right">
      {% if page.toc %}
        <nav class="doc-toc-nav">
          <h4>On This Page</h4>
          {{ content | toc_generate }}
        </nav>
      {% endif %}
    </aside>

  </div><!-- /.doc-layout -->

</main>

<!-- 4. 引入 AlbeMic 主题的页脚 -->
{% include site-footer.html %}

<!-- 5. 内联 JavaScript 脚本 (保持不变) -->
<script>
  /* ... 这里是你之前的全部 JS 代码，无需改动 ... */
  // Vanilla Scrollspy code...
  document.addEventListener('DOMContentLoaded', function() { /* ... */ });
</script>