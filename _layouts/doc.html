<style>
  /* ==========================================================================
     PART 2: RESPONSIVE & MULTI-STATE DOC LAYOUT CSS
     ========================================================================== */

  /* --- 1. 单栏状态 (Mobile First, < 992px) --- */
  /* 默认块状布局，无需特殊CSS */

  /* --- 2. 双栏状态 (左导航 + 内容, >= 992px) --- */
  @media screen and (min-width: 992px) {
    .main.container--doc {
      position: relative;
      display: flex;
      gap: 2.5em; /* 栏目间距 */
      max-width: 1100px; /* 为两栏提供一个合理的总宽度 */
      margin: 0 auto; /* 容器居中 */
    }
    .doc-nav-container {
      display: block;
      flex: 0 0 280px; /* 固定宽度，不伸缩 */
      position: sticky;
      top: 2rem;
      max-height: calc(100vh - 4rem);
    }
    .article--doc {
      flex: 1 1 auto; /* 占据剩余空间 */
      min-width: 0; /* 防止内容溢出 */
    }
  }

  /* --- 3. 三栏状态 (标准桌面, >= 1200px) --- */
  @media screen and (min-width: 1200px) {
    .main.container--doc {
      max-width: 1400px; /* 为三栏提供更宽敞的总宽度 */
    }
    /* 只有在 has-right-toc 类存在时才显示右侧目录 */
    .main.container--doc.has-right-toc .doc-chapter-toc {
      display: block;
      flex: 0 0 260px; /* 固定宽度，不伸缩 */
      position: sticky;
      top: 2rem;
      max-height: calc(100vh - 4rem);
      overflow-y: auto;
    }
  }

  /* --- 4. 宽三栏状态 (内容宽度封顶, >= 1600px) --- */
  @media screen and (min-width: 1600px) {
    .main.container--doc {
      max-width: 1540px; /* 进一步扩大总宽度 */
    }
    .article--doc {
      /* 核心！限制阅读区最大宽度以保证可读性，并防止布局跳动 */
      max-width: 820px;
      /* 
         当文章区达到最大宽度后, flex: 1 1 auto 会让它的容器继续变大,
         但内容本身宽度不变。我们将整个flex容器居中，看起来就像是文章区两侧的空白变大了。
      */
    }
  }

  /* --- 5. 超宽三栏状态 (拉开间距, >= 1900px) --- */
  @media screen and (min-width: 1900px) {
    .main.container--doc {
      max-width: 90%; /* 占满更多屏幕，但两边留白 */
      justify-content: center; /* 让flex子项居中，多余空间分配到两侧和中间 */
    }
  }

  /* ==========================================================================
     通用组件样式 (保持不变)
     ========================================================================== */

  /* --- LEFT BOOK NAVIGATION --- */
  .doc-nav-container { display: none; } /* 移动端默认隐藏 */
  .doc-nav-scroll-area { height: 100%; overflow-y: auto; background-color: #f1f3f5; border: 1px solid #e0e0e0; border-radius: 8px; padding: 1em; }
  .doc-nav-container h3 { display: none; }
  .doc-nav-container ul { list-style: none; padding: 0; margin: 0; }
  .doc-nav-container li { position: relative; }
  .doc-nav-container a { display: block; padding: 0.4em 0.5em; text-decoration: none; color: #666666; font-weight: normal; }
  .doc-nav-container a:hover { text-decoration: none; }
  .doc-nav-container li.active > a { color: #000; font-weight: 600; }
  .doc-nav-container ul ul { padding-left: 1em; }

  /* --- MOBILE NAVIGATION (FAB & OFF-CANVAS MENU) --- */
  .doc-nav-fab { position: fixed; bottom: 30px; left: 30px; width: 56px; height: 56px; background-color: #2c3e50; color: white; border-radius: 50%; border: none; display: flex; justify-content: center; align-items: center; box-shadow: 0 4px 12px rgba(0,0,0,0.2); cursor: pointer; z-index: 1001; transition: transform 0.2s ease-in-out; }
  .doc-nav-fab:hover { transform: scale(1.05); }
  .doc-nav-fab .icon { width: 24px; height: 24px; fill: currentColor; }
  .doc-nav-mobile-menu { position: fixed; top: 0; left: 0; width: 80%; max-width: 320px; height: 100%; background-color: white; z-index: 1002; transform: translateX(-100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 0 20px rgba(0,0,0,0.2); overflow-y: auto; }
  .doc-nav-mobile-menu.is-open { transform: translateX(0); }
  .doc-nav-mobile-menu .doc-nav-scroll-area { padding-top: 2em; }
  .doc-nav-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
  .doc-nav-overlay.is-visible { opacity: 1; visibility: visible; }
  @media screen and (min-width: 992px) { .doc-nav-fab, .doc-nav-mobile-menu, .doc-nav-overlay { display: none; } } /* 在双栏及以上隐藏移动端导航 */

  /* --- RIGHT TOCBOT STYLES --- */
  .doc-chapter-toc { display: none; } /* 默认隐藏 */
  .doc-chapter-toc h3 { margin: 0 0 1em; font-size: 1.1em; font-weight: 600; color: #333; }
  .toc-list { margin: 0; padding: 0; list-style: none; }
  .toc-list-item { margin-bottom: 5px; }
  .toc-list .toc-list { padding-left: 1.25em; }
  .toc-link { display: block; padding: 4px 10px; border-left: 2px solid #EEE; color: #777; text-decoration: none; font-size: 0.875em; line-height: 1.5; transition: all 0.2s ease-in-out; }
  .toc-link:hover { color: #333; border-left-color: #AAA; }
  .is-active-link { color: #007bff; font-weight: 600; border-left-color: #007bff; background-color: #f0f7ff; }
  .toc-mobile-container { display: block; margin: 2em 0; padding: 1em; border: 1px solid #eee; border-radius: 4px; background-color: #f9f9f9; }
  .toc-mobile-container h3 { margin-top: 0; }
  @media screen and (min-width: 1200px) { .toc-mobile-container { display: none; } } /* 在三栏及以上隐藏移动端目录 */

</style>