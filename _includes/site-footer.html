<footer class="footer">
  <div class="container">
    <div class="copyright  typeset">
      <small class="small">&copy; {{ site.title }} {{ site.time | date: '%Y' }}</small>
    </div>

    <!-- G-Translate ç¿»è¯‘æµ®åŠ¨æ¡æ§åˆ¶é€»è¾‘ -->
    <div id="gtranslate-block-container">
      <div class="gtranslate_wrapper"></div>
      <script>
        // G-Translate è®¾ç½® - ç¡®ä¿å®ƒä»¬åœ¨è„šæœ¬åŠ è½½å‰å®šä¹‰
        window.gtranslateSettings = {
          "default_language": "zh-CN",
          "detect_browser_language": true, // ä¿æŒä¸º trueï¼Œä»¥ä¾¿ G-Translate é¦–æ¬¡åŠ è½½æ—¶æ£€æµ‹
          "languages": ["zh-CN", "zh-TW", "th", "en"],
          "wrapper_selector": ".gtranslate_wrapper"
        };

        // åŠ¨æ€åˆ›å»ºå¹¶åŠ è½½ G-Translate è„šæœ¬ã€‚
        // ç”±äºæˆ‘ä»¬å°†å§‹ç»ˆæ§åˆ¶å…¶å¯è§æ€§ï¼Œæ‰€ä»¥è„šæœ¬æœ¬èº«éœ€è¦åŠ è½½ã€‚
        const gTranslateScript = document.createElement('script');
        gTranslateScript.src = "https://cdn.gtranslate.net/widgets/latest/float.js";
        gTranslateScript.defer = true; // å»¶è¿ŸåŠ è½½ï¼Œä¸é˜»å¡é¡µé¢æ¸²æŸ“
        document.getElementById('gtranslate-block-container').appendChild(gTranslateScript);

        // è·å– G-Translate åŒ…è£…å™¨å…ƒç´ 
        const gTranslateWrapper = document.querySelector('.gtranslate_wrapper');

        // åœ¨è„šæœ¬åŠ è½½åç«‹å³è¿è¡Œçš„å‡½æ•°ï¼Œå› ä¸º gTranslateWrapper å¯èƒ½è¿˜æ²¡æœ‰å®Œå…¨åˆå§‹åŒ–
        gTranslateScript.onload = () => {
            // è·å–æµè§ˆå™¨é¦–é€‰è¯­è¨€
            const browserLangIsZhCn = navigator.language.startsWith('zh-CN');
            // ä» localStorage è¯»å–ç”¨æˆ·æ˜¯å¦æ‰‹åŠ¨è®¾ç½®äº†æµ®åŠ¨æ¡çš„å¯è§æ€§
            // 'visible' è¡¨ç¤ºç”¨æˆ·å¸Œæœ›å®ƒæ˜¾ç¤ºï¼Œ'hidden' è¡¨ç¤ºç”¨æˆ·å¸Œæœ›å®ƒéšè—
            const userOverride = localStorage.getItem('gTranslateOverrideVisibility');

            let initialDisplay = 'none'; // é»˜è®¤æƒ…å†µä¸‹ï¼Œå…ˆéšè—æµ®åŠ¨æ¡

            if (userOverride === 'visible') {
                initialDisplay = 'block'; // ç”¨æˆ·æ˜ç¡®è®¾ç½®ä¸ºæ˜¾ç¤º
            } else if (userOverride === 'hidden') {
                initialDisplay = 'none'; // ç”¨æˆ·æ˜ç¡®è®¾ç½®ä¸ºéšè—
            } else if (!browserLangIsZhCn) {
                // å¦‚æœæ²¡æœ‰ç”¨æˆ·åå¥½ï¼Œä¸”æµè§ˆå™¨è¯­è¨€ä¸æ˜¯ç®€ä½“ä¸­æ–‡ï¼Œåˆ™é»˜è®¤æ˜¾ç¤º
                initialDisplay = 'block';
            }
            // å¦åˆ™ï¼ˆæµè§ˆå™¨è¯­è¨€æ˜¯ç®€ä½“ä¸­æ–‡ä¸”æ— ç”¨æˆ·åå¥½ï¼‰ï¼Œä¿æŒä¸º 'none'

            gTranslateWrapper.style.display = initialDisplay;
        };


        /**
         * å…¨å±€å‡½æ•°ï¼šç”¨äºåˆ‡æ¢ G-Translate æµ®åŠ¨æ¡çš„å¯è§æ€§ã€‚
         * æ¯æ¬¡åˆ‡æ¢æ—¶ï¼Œéƒ½ä¼šå°†ç”¨æˆ·çš„é€‰æ‹©å­˜å‚¨åˆ° localStorageã€‚
         */
        window.toggleGTranslateVisibility = function() {
          const currentDisplay = gTranslateWrapper.style.display;

          if (currentDisplay === 'none') {
            gTranslateWrapper.style.display = 'block';
            // ç”¨æˆ·ç‚¹å‡»äº†æ˜¾ç¤ºï¼Œæ‰€ä»¥ä¿å­˜åå¥½ä¸º 'visible'
            localStorage.setItem('gTranslateOverrideVisibility', 'visible');
          } else {
            gTranslateWrapper.style.display = 'none';
            // ç”¨æˆ·ç‚¹å‡»äº†éšè—ï¼Œæ‰€ä»¥ä¿å­˜åå¥½ä¸º 'hidden'
            localStorage.setItem('gTranslateOverrideVisibility', 'hidden');
          }
        };
      </script>
    </div>
    <!-- G-Translate ç¿»è¯‘æµ®åŠ¨æ¡æ§åˆ¶é€»è¾‘ ç»“æŸ -->

<!-- ===================================================================== -->
<!-- Darkmode.js Initialization Script -->
<!-- ===================================================================== -->

<!-- 1. Load the LOCAL JavaScript file we downloaded -->
<script src="/assets/darkmode-js.min.js"></script>

<!-- 2. Configure and activate the library -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
  
    const options = {
      time: '0.5s',
      mixColor: '#fff', 
      backgroundColor: '#fff',
      saveInCookies: true,
      label: 'ğŸŒ“',
      autoMatchOsTheme: true
    };

    const darkmode = new Darkmode(options);
    darkmode.showWidget();

    // Move the widget to our placeholder in the header
    const widget = document.querySelector('.darkmode-widget');
    const placeholder = document.getElementById('darkmode-placeholder');

    if (widget && placeholder) {
      placeholder.appendChild(widget);
    }
  });
</script>


    {% include nav-footer.html %}
  </div>
</footer>